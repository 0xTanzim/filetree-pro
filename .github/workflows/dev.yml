name: Development Testing

on:
  push:
    branches:
      - 'dev/*'
      - 'feature/*'
      - 'v2/*'
  pull_request:
    branches:
      - 'dev/*'
      - 'feature/*'

env:
  NODE_VERSION: 24.x
  PNPM_VERSION: latest

jobs:
  # Development Testing Only - No Publishing
  dev-test:
    name: ğŸ§ª Development Testing
    runs-on: ubuntu-latest

    steps:
    - name: ğŸš€ Checkout repository
      uses: actions/checkout@v4

    - name: ğŸ› ï¸ Setup Node.js ${{ env.NODE_VERSION }}
      uses: actions/setup-node@v4
      with:
        node-version: ${{ env.NODE_VERSION }}
        cache: 'npm'

    - name: ğŸ“¦ Setup pnpm
      run: npm install -g pnpm@${{ env.PNPM_VERSION }}

    - name: ğŸ“¥ Install dependencies
      run: pnpm install --frozen-lockfile

    - name: ğŸ” Lint code
      run: pnpm run lint
      continue-on-error: true

    - name: ğŸ—ï¸ Compile TypeScript
      run: pnpm run compile

    - name: âœ… Run tests
      run: pnpm test

    - name: ğŸ’¡ Development Info
      run: |
        echo "ğŸ”§ Development branch testing complete!"
        echo "ğŸ“ This workflow only runs tests - no publishing happens from dev branches"
        echo "ğŸš€ To publish: merge to main, then create a GitHub release"
